<html>

<head>

    <title>OSU Campus</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon"
        href="http://www.osu.edu/assets/web/navbar/osu_navbar/images/favicon.ico">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="">
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
        integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
        crossorigin=""></script>

    <script src="https://unpkg.com/esri-leaflet@2.3.0/dist/esri-leaflet.js"
        integrity="sha512-1tScwpjXwwnm6tTva0l0/ZgM3rYNbdyMj5q6RSQMbNX6EUMhYDE3pMRGZaT41zHEvLoWEK7qFEJmZDOoDMU7/Q=="
        crossorigin="">
    </script>
    <!-- Load Esri Leaflet Geocoder from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.2.14/dist/esri-leaflet-geocoder.css"
        integrity="sha512-v5YmWLm8KqAAmg5808pETiccEohtt8rPVMGQ1jA6jqkWVydV5Cuz3nJ9fQ7ittSxvuqsvI9RSGfVoKPaAJZ/AQ=="
        crossorigin="">
    <script src="https://unpkg.com/esri-leaflet-geocoder@2.2.14/dist/esri-leaflet-geocoder.js"
        integrity="sha512-uK5jVwR81KVTGe8KpJa1QIN4n60TsSV8+DPbL5wWlYQvb0/nYNgSOg9dZG6ViQhwx/gaMszuWllTemL+K+IXjg=="
        crossorigin=""></script>


</head>

<body>
    <div id="mapid" style="width: 100%; height: 100%; position: relative;" </div> </div> <script>
        var mymap = L.map('mapid').setView([40.000823481406954, -83.02537039514612], 15);

        L.tileLayer(
        'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',
        {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        id: 'mapbox.streets'
        }).addTo(mymap);

        //imports basemap, all buildings trees etc.
        //var url =
        //'https://gismaps.osu.edu/arcgis/rest/services/OSUMaps/BaseMap/MapServer';

        //L.esri.dynamicMapLayer({
        //url: url,
        //opacity: 0.50,
        //useCors: false
        //}).addTo(mymap);

        // Testing


        //imports Buildings only
        var url =
        'https://gismaps.osu.edu/arcgis/rest/services/OSUMaps/extractService/MapServer/27';

        L.esri.featureLayer({
        url: url,
        opacity: 1.0,
        useCors: false,
        style: function (feature) {
        if (feature.properties.BuildMaint === 'FOD') {
        return { color: 'red', weight: .1 };
        } else if (feature.properties.BuildMaint === 'Student Life') {
        return { color: 'blue', weight: .1 };
        } else if (feature.properties.BuildMaint === 'OSUWMC') {
        return { color: 'green', weight: .1 };
        } else {
        return { color: 'grey', weight: .1 };}}
        
        }).addTo(mymap);

        //attempts to hover 
        function onEachFeature(feature, layer) {
		var popupContent = "<p>I started out as a GeoJSON " +
				feature.geometry.type + ", but now I'm a Leaflet vector!</p>";
		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
		}
		layer.bindPopup(popupContent);
	}


        

        //inserts generic searchbar
        var arcgisOnline = L.esri.Geocoding.arcgisOnlineProvider();

        L.esri.Geocoding.geosearch({
        providers: [
        arcgisOnline,
        L.esri.Geocoding.featureLayerProvider({
        url: 'https://services.arcgis.com/uCXeTVveQzP4IIcx/arcgis/rest/services/gisday/FeatureServer/0/',
        searchFields: ['Name', 'Organization'],
        label: 'GIS Day Events',
        bufferRadius: 5000,
        formatSuggestion: function (feature) {
        return feature.properties.Name + ' - ' + feature.properties.Organization;
        }
        })
        ]
        }).addTo(mymap);





        </script>





</body>

</html>